<template>
  <div class="main">

  <div class="col-md-12">
    <div class="query-row-date">
        <div class="query-row-date-title">
            <label class="query-title-label">计划出科时间：</label>
        </div>
        <div class="query-row-date-input" style="padding-left:8px;">
            <select id="selYear" v-on:change="dateChange($event)">
                <option v-for="(item,index) in selYearArr" v-bind:selected="Number(dateStrArr[0])===item"> {{item}}</option>
            </select>
            <label style="float:left;">年</label>
        </div>
        <div class="query-row-date-input">
            <select id="selMonth" v-on:change="dateChange($event)">
                <option v-for="(item,index) in selMonthArr" v-bind:selected="Number(dateStrArr[1])===item">{{item}}</option>
            </select>
            <label style="float:left;">月</label>
        </div>
        <div class="query-row-date-input">
            <select id="selDay" v-on:change="dateChange($event)">
                <option v-bind:selected="Number(dateStrArr[2])===15">15</option>
                <option v-bind:selected="Number(dateStrArr[2])===16">月底</option>
            </select>
            <label style="float:left;">日</label>
        </div>
    </div>
    <div class="query-row">
        <div class="query-col">
            <label class="query-label-control">出科科室：</label>
            <div class="query-input-div">
                <select id="departmentList" class="query-input-control" v-on:change="statusChange()">
                    <option selected="" value="-1">请选择</option>
                    <option value="2">消化内科</option>
                    <option value="100">儿科</option>
                </select>
            </div>
        </div>
        <div class="query-col">
            <label class="query-label-control">出科科状态：</label>
            <div class="query-input-div">
                <select id="rotateStatus" name="foo" class="query-input-control" v-on:change="statusChange()">
                    <option selected="" value="-1">请选择</option>
                    <option value="0">未审批</option>
                    <option value="2">未入科</option>
                    <option value="100">未申请出科</option>
                    <option value="101">老师未填写评语</option>
                    <option value="102">科主任未审核</option>
                    <option value="200">已出科</option>
                </select>
            </div>
        </div>
        <div class="query-col">
            <div class="query-btn">
                <el-button type="info">查询</el-button>
            </div>
        </div>
    </div>
    <div class="query-toolbar">
        <div class="query-btn">
            <el-button type="info">导出学员</el-button>
        </div>
    </div>
  </div>

  <el-main>
    <el-table :data="studentListData" stripe border :max-height="innerHeight" style="width: 100%;">
      <el-table-column prop="index" label="序号"></el-table-column>
      <el-table-column prop="userName" label="账号"></el-table-column>
      <el-table-column prop="realName" label="姓名"></el-table-column>
      <el-table-column prop="department" label="出科科室"></el-table-column>
      <el-table-column prop="planEndDate" label="计划出科时间"></el-table-column>
      <el-table-column prop="evaluate" label="护士长评价"></el-table-column>
      <el-table-column prop="realEndDate" label="实际出科时间"></el-table-column>
      <el-table-column prop="rotateStatus" label="出科状态"></el-table-column>
      <el-table-column prop="operation" label="操作"></el-table-column>
    </el-table>
  </el-main>
</div>
</template>

<script>
export default {
  name: '',
  data () {
    return {
      innerHeight:window.innerHeight - 160,
      DateTimes: 0,
      dateStrArr: [],
      selYearArr: [],
      selMonthArr: [1,2,3,4,5,6,7,8,9,10,11,12],
      studentListData:[
        {
          index:1,
          userName:'18888888888',
          realName:'李四',
          department:'妇产科',
          planEndDate:'2018-1-30',
          evaluate:'优秀',
          realEndDate:'2018-3-30',
          rotateStatus:'已出科',
          operation:'个人信息 轮转手册 出科详情'
        },{
          index:1,
          userName:'18888888888',
          realName:'李四',
          department:'妇产科',
          planEndDate:'2018-1-30',
          evaluate:'优秀',
          realEndDate:'2018-3-30',
          rotateStatus:'已出科',
          operation:'个人信息 轮转手册 出科详情'
        },{
          index:1,
          userName:'18888888888',
          realName:'李四',
          department:'妇产科',
          planEndDate:'2018-1-30',
          evaluate:'优秀',
          realEndDate:'2018-3-30',
          rotateStatus:'已出科',
          operation:'个人信息 轮转手册 出科详情'
        },{
          index:1,
          userName:'18888888888',
          realName:'李四',
          department:'妇产科',
          planEndDate:'2018-1-30',
          evaluate:'优秀',
          realEndDate:'2018-3-30',
          rotateStatus:'已出科',
          operation:'个人信息 轮转手册 出科详情'
        }
      ]
    }
  },
  activated() {
    window.scrollTo(0, 0);
    var nowdate = new Date();
    var newdate = nowdate.toLocaleDateString().replace(/[\/]/gi, '-');
    var dateStr = newdate.split('-');
    var dayStr = dateStr[dateStr.length - 1];
    if(Number(dayStr)>=1&&Number(dayStr)<16){
        dateStr[dateStr.length-1]='01';
    }else{
        dateStr[dateStr.length-1]='16';
    }
    this.dateStrArr = dateStr;
    this.DateTimes = dateStr.join('-');
    var curYear = nowdate.getFullYear();
    for (var i = 2014; i <= curYear + 2; i++) {
        this.selYearArr.push(i);
    }
  },
  methods: {
    //设置日期控件值的改变事件
    dateChange: function (evt) {
        var opt = evt.target;
        var optID = opt.id;
        if (optID === 'selYear') {
            this.dateStrArr[0] = opt.value;
        }
        if (optID === 'selMonth') {
            this.dateStrArr[1] = opt.value;
        }
        this.DateTimes = this.dateStrArr.join('-');
    }
  }
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style>
@import '../assets/query.css';

.col-md-12{
  min-height: 1px;
  width: 100%;
  padding-right: 15px;
  padding-left: 15px;
}
td,th div{text-align: center;}
th{color:#333;text-align: center;}
</style>
