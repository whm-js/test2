<template>
  <div class="main">

  <div class="col-md-12">
    <div class="query-row-date">
        <div class="query-row-date-title">
            <label class="query-title-label">计划入科时间：</label>
        </div>
        <div class="query-row-date-input" style="padding-left:8px;">
            <select id="selYear" v-on:change="dateChange($event)">
                <option v-for="(item,index) in selYearArr" v-bind:selected="Number(dateStrArr[0])===item"> {{item}}</option>
            </select>
            <label style="float:left;">年</label>
        </div>
        <div class="query-row-date-input">
            <select id="selMonth" v-on:change="dateChange($event)">
                <option v-for="(item,index) in selMonthArr" v-bind:selected="Number(dateStrArr[1])===item">{{item}}</option>
            </select>
            <label style="float:left;">月</label>
        </div>
        <div class="query-row-date-input">
            <select id="selDay" v-on:change="dateChange($event)">
                <option v-bind:selected="Number(dateStrArr[2])===1">1</option>
                <option v-bind:selected="Number(dateStrArr[2])===16">16</option>
            </select>
            <label style="float:left;">日</label>
        </div>
    </div>
    <div class="query-row">
        <div class="query-col">
            <label class="query-label-control">入科科室：</label>
            <div class="query-input-div">
                <select id="departmentList" class="query-input-control" style="border: solid 1px #ccc;appearance:none;-moz-appearance:none;-webkit-appearance:none;background: none;padding-right: 14px;"></select>
            </div>
        </div>
        <div class="query-col">
            <label class="query-label-control">入科状态：</label>
            <div class="query-input-div">
                <select id="rotateStatus" name="foo" class="query-input-control" v-on:change="statusChange()">
                    <option selected="" value="-1">全部</option>
                    <option value="0">未审批</option>
                    <option value="2">未入科</option>
                    <option value="100">未申请出科</option>
                    <option value="101">老师未填写评语</option>
                    <option value="102">科主任未审核</option>
                    <option value="200">已出科</option>
                </select>
            </div>
        </div>
        <div class="query-col">
            <div class="query-btn">
                <button id="selectAdmin" class="btn" type="button">查询</button>
            </div>
        </div>
    </div>
    <div class="query-toolbar">
        <div class="query-btn">
            <button id="exportBtn" class="btn">导出学员</button>
        </div>
    </div>
  </div>


  <div class="col-md-12">
    <table class="table table-hover" cellpadding="0" cellspacing="0">
        <thead>
          <tr>
            <th>序号</th>
            <th>账号</th>
            <th>姓名</th>
            <th>原科室</th>
            <th>入科科室</th>
            <th>计划入科时间</th>
            <th>计划出科时间</th>
            <th>实际入科时间</th>
            <th>入科状态</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>13333333333</td>
            <td>张三</td>
            <td>消化内科</td>
            <td>内科</td>
            <td>2017-10-1</td>
            <td>2018-1-15</td>
            <td></td>
            <td>未批准入科</td>
            <td>个人信息</td>
          </tr>
          <tr>
            <td>1</td>
            <td>13333333333</td>
            <td>张三</td>
            <td>消化内科</td>
            <td>内科</td>
            <td>2017-10-1</td>
            <td>2018-1-15</td>
            <td></td>
            <td>未批准入科</td>
            <td>个人信息</td>
          </tr>
          <tr>
            <td>1</td>
            <td>13333333333</td>
            <td>张三</td>
            <td>消化内科</td>
            <td>内科</td>
            <td>2017-10-1</td>
            <td>2018-1-15</td>
            <td></td>
            <td>未批准入科</td>
            <td>个人信息</td>
          </tr>
        </tbody>
      </table>
  </div>

</div>
</template>

<script>
export default {
  name: '',
  data () {
    return {
      DateTimes: 0,
      dateStrArr: [],
      selYearArr: [],
      selMonthArr: []
    }
  },
  activated() {
    window.scrollTo(0, 0);
    this.initDateTime();
  },
  methods: {
    //初始化查询条件的日期控件
    initDateTime: function () {
        var nowdate = new Date();
        var newdate = nowdate.toLocaleDateString().replace(/[\/]/gi, '-');
        var dateStr = newdate.split('-');
        var dayStr = dateStr[dateStr.length - 1];
        if (Number(dayStr) >= 1 && Number(dayStr) <= 15) {
            dateStr[dateStr.length - 1] = '15';
        } else {
            dateStr[dateStr.length - 1] = '16';
        }
        var entryDate = dateStr.join('-');
        var select_year_option = [];
        var select_month_option = [];
        var curYear = new Date().getFullYear();
        for (var i = 2014; i <= curYear + 2; i++) {
            select_year_option.push(i);
        }
        for (var i = 1; i <= 12; i++) {
            select_month_option.push(i);
        }
        this.DateTimes = entryDate;
        this.dateStrArr = dateStr;
        this.selYearArr = select_year_option;
        this.selMonthArr = select_month_option;
    },
    //设置日期控件值的改变事件
    dateChange: function (evt) {
        var opt = evt.target;
        var optID = opt.id;
        if (optID === 'selYear') {
            this.dateStrArr[0] = opt.value;
        }
        if (optID === 'selMonth') {
            this.dateStrArr[1] = opt.value;
        }
        if (optID === 'selDay') {
            if (opt.value === '月底') {
                this.dateStrArr[2] = 16;
            } else {
                this.dateStrArr[2] = '15';
            }
        }
        this.DateTimes = this.dateStrArr.join('-');
    }
  }
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style>
@import '../assets/query.css';

.col-md-12{
  min-height: 1px;
  width: 100%;
  padding-right: 15px;
  padding-left: 15px;
}
.table {
    width: 100%;
    max-width: 100%;
    margin-bottom: 20px;
    border: 1px solid #ddd;
}
tr,td,th {
    height:45px;
    text-align: center;
    border: 0.1px solid #ddd;
}
.table-hover>tbody>tr:hover {
    background-color: #f5f5f5
}
.table>tbody>tr:nth-of-type(odd) {
    background-color: #f9f9f9
}

</style>
